<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GIS: GIS.VectorFeature.cs Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>GIS.VectorFeature.cs</h1><a href="GIS_8VectorFeature_8cs.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//</span>
00002 <span class="comment">//VectorFeature.cs</span>
00003 <span class="comment">//</span>
00004 
00023 
00024 <span class="keyword">using</span> System;
00025 <span class="keyword">using</span> System.Drawing;
00026 
00027 <span class="keyword">namespace </span>ShapeDotNet.GIS
00028 {   
<a name="l00035"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html">00035</a>     <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html">VectorFeature</a>
00036     {
00037         <span class="comment">// PointD[ part ][ points ]</span>
00038         <span class="keyword">private</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a>[][] _segment;
00039         <span class="keyword">private</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html">MapMetrics</a> _mapMetrics;
00040         <span class="keyword">private</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1RectangleD.html">RectangleD</a> _extents;
00041         <span class="keyword">private</span> <span class="keywordtype">bool</span> _isInViewport;
00042         <span class="keywordtype">int</span> _segmentCounter;
00043         <span class="keywordtype">float</span> _featureAngle;
00044         <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a> _labelAnchor;
00045 
00046         
00047         
<a name="l00055"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeaturea0">00055</a>         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html">VectorFeature</a>( <span class="keywordtype">int</span> numOfParts, <a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html">MapMetrics</a> mapMetrics )
00056         {
00057             <span class="keywordflow">if</span> ( numOfParts == 1094233352 )
00058             {
00059                 numOfParts = 5;
00060             }
00061             _segment        = <span class="keyword">new</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a>[ numOfParts ][];
00062             _mapMetrics     = mapMetrics;
00063             _extents        = <span class="keyword">new</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1RectangleD.html">RectangleD</a>();
00064             _segmentCounter = 0;
00065             _featureAngle   = 0;
00066         }
00067 
00068         
00069         
<a name="l00074"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeaturea1">00074</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> AddSegment( <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a>[] points )
00075         {
00076             _segment[ _segmentCounter ] = points;
00077             ++_segmentCounter;
00078         }
00079 
00080 
00081 
<a name="l00089"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeaturea2">00089</a>         <span class="keyword">public</span> <span class="keywordtype">double</span> DistanceFromFeature( <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a> point )
00090         {           
00091             <span class="keywordtype">double</span> tmpx;
00092             <span class="keywordtype">double</span> tmpy;
00093 
00094             <span class="keywordflow">if</span> ( <span class="keyword">this</span>[0].Length == 1 ) <span class="comment">// It's a point feature</span>
00095             {
00096                 tmpx = Math.Pow( Math.Abs( <span class="keyword">this</span>.GetPoint(0, 0).X - point.<a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html#ShapeDotNet_1_1GIS_1_1PointD00">X</a> ), 2 ); 
00097                 tmpy = Math.Pow( Math.Abs( <span class="keyword">this</span>.GetPoint(0, 0).Y - point.<a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html#ShapeDotNet_1_1GIS_1_1PointD01">Y</a> ), 2 );
00098             }
00099             <span class="keywordflow">else</span>  <span class="comment">// otherwise it's a multi-point feature</span>
00100             {
00101                 tmpx = Math.Pow( Math.Abs( <span class="keyword">this</span>.Extents.CenterX - point.<a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html#ShapeDotNet_1_1GIS_1_1PointD00">X</a> ), 2 ); 
00102                 tmpy = Math.Pow( Math.Abs( <span class="keyword">this</span>.Extents.CenterY - point.<a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html#ShapeDotNet_1_1GIS_1_1PointD01">Y</a> ), 2 );
00103             }
00104             
00105             <span class="keywordflow">return</span> Math.Sqrt( ( tmpx + tmpy ) ); 
00106         }
00107 
00108 
00109 
00113         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1RectangleD.html">RectangleD</a> Extents
<a name="l00114"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeature00">00114</a>         {
00115             get
00116             {
00117                 <span class="keywordflow">return</span> _extents;
00118             }
00119             set
00120             {
00121                 _extents = value;
00122             }
00123         }
00124 
00125         
00126         
<a name="l00133"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeaturea3">00133</a>         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a> GetPoint( <span class="keywordtype">int</span> part, <span class="keywordtype">int</span> point )
00134         {
00135             <span class="keywordflow">return</span> _segment[ part ][ point ];
00136         }
00137 
00138         
00139         
<a name="l00145"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeaturea4">00145</a>         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a>[] GetPoints( <span class="keywordtype">int</span> part )
00146         {
00147             <span class="keywordflow">return</span> _segment[ part ];
00148         }
00149 
00150 
00151 
00156         <span class="keyword">public</span> <span class="keywordtype">float</span> FeatureAngle
<a name="l00157"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeature01">00157</a>         {
00158             get
00159             {
00160                 <span class="keywordflow">return</span> _featureAngle;
00161             }
00162             set
00163             {
00164                 _featureAngle = value;
00165             }
00166         }
00167 
00168 
00169 
00173         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a> LabelAnchor
<a name="l00174"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeature02">00174</a>         {
00175             get
00176             {
00177                 <span class="keywordflow">return</span> _labelAnchor;
00178             }
00179             set
00180             {
00181                 _labelAnchor = value;
00182             }
00183         }
00184         
00185         
00186         
00190         <span class="keyword">public</span> <span class="keywordtype">bool</span> IsInViewport
<a name="l00191"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeature03">00191</a>         {
00192             get
00193             {
00194                 <span class="keywordflow">return</span> _isInViewport;
00195             }
00196             set
00197             {
00198                 _isInViewport = value;
00199             }
00200         }
00201 
00202         
00203         
00207         <span class="keyword">public</span> <span class="keywordtype">int</span> SegmentCount
<a name="l00208"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeature04">00208</a>         {
00209             get
00210             {
00211                 <span class="keywordflow">return</span> _segment.GetLength( 0 );
00212             }
00213         }
00214         
00215 
00216 
00223         <span class="keyword">public</span> Point[] <span class="keyword">this</span>[ <span class="keywordtype">int</span> part ]
<a name="l00224"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1VectorFeature.html#ShapeDotNet_1_1GIS_1_1VectorFeature05">00224</a>         {
00225             get
00226             {
00227                 Point[] tempPoints = <span class="keyword">new</span> Point[ _segment[ part ].Length ]; 
00228 
00229                 <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> point=0; point &lt; _segment[ part ].Length; ++point )
00230                 {
00231                     tempPoints[ point ] = <span class="keyword">new</span> Point( 0, 0 );
00232                     _mapMetrics.World2Pixel( _segment[ part ][ point ], ref tempPoints[ point ] );
00233                 }
00234 
00235                 <span class="keywordflow">return</span> tempPoints;  
00236             }
00237         }
00238     }
00239 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Feb 10 17:52:24 2004 for GIS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
