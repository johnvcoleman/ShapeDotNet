<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GIS: GIS.MapMetrics.cs Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Packages</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>GIS.MapMetrics.cs</h1><a href="GIS_8MapMetrics_8cs.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">//</span>
00002 <span class="comment">//MapMetrics.cs</span>
00003 <span class="comment">//</span>
00004 
00023 
00024 <span class="keyword">using</span> System;
00025 <span class="keyword">using</span> System.Drawing;
00026 
00027 <span class="keyword">namespace </span>ShapeDotNet.GIS
00028 {
<a name="l00035"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html">00035</a>     <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html">MapMetrics</a>
00036     {
00037         <a class="code" href="classShapeDotNet_1_1GIS_1_1RectangleD.html">RectangleD</a> _extents;
00038         <a class="code" href="classShapeDotNet_1_1GIS_1_1RectangleD.html">RectangleD</a> _viewport;
00039         Bitmap _canvas;
00040         <span class="keywordtype">double</span> _mapUnitsPerPixelX;
00041         <span class="keywordtype">double</span> _mapUnitsPerPixelY;
00042 
<a name="l00043"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetricsa0">00043</a>         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html">MapMetrics</a>()
00044         {
00045             _viewport = <span class="keyword">new</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1RectangleD.html">RectangleD</a>();
00046             _extents = <span class="keyword">new</span> RectangleD();
00047         }
00048 
00052         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1RectangleD.html">RectangleD</a> Extents
<a name="l00053"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetrics00">00053</a>         {
00054             get
00055             {
00056                 <span class="keywordflow">return</span> _extents;
00057             }
00058             set
00059             {
00060                 _extents = value;
00061             }
00062         }
00063         
00064         <span class="keyword">private</span> <span class="keywordtype">void</span> CalculateUnitsPerPixel()
00065         {           
00066             _mapUnitsPerPixelX = _viewport.DeltaX / _canvas.Width;
00067             _mapUnitsPerPixelY = _viewport.DeltaY / _canvas.Height;
00068         }
00069         
00073         <span class="keyword">public</span> Bitmap Canvas
<a name="l00074"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetrics01">00074</a>         {
00075             get
00076             {
00077                 <span class="keywordflow">return</span> _canvas;
00078             }
00079             set
00080             {
00081                 _canvas = value;
00082             }
00083         }
00084         
<a name="l00090"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetricsa1">00090</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> Pixel2World( ref <span class="keywordtype">double</span> dx, ref <span class="keywordtype">double</span> dy )
00091         {
00092             dx = _viewport.Xmin + ( dx * _mapUnitsPerPixelX );
00093             dy = _viewport.Ymax - ( dy * _mapUnitsPerPixelY );
00094         }
00095 
<a name="l00100"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetricsa2">00100</a>         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a> Pixel2World( Point point )
00101         {
00102             <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a> tempPoint = <span class="keyword">new</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a>();
00103 
00104             tempPoint.<a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html#ShapeDotNet_1_1GIS_1_1PointD00">X</a> = _viewport.Xmin + ( point.X * _mapUnitsPerPixelX );
00105             tempPoint.<a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html#ShapeDotNet_1_1GIS_1_1PointD01">Y</a> = _viewport.Ymax - ( point.Y * _mapUnitsPerPixelY );
00106 
00107             <span class="keywordflow">return</span> tempPoint;
00108         }
00109 
<a name="l00113"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetricsa3">00113</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> UpdateMetrics()
00114         {
00115             CalculateUnitsPerPixel();
00116         }
00117 
00121         <span class="keyword">public</span> <a class="code" href="classShapeDotNet_1_1GIS_1_1RectangleD.html">RectangleD</a> Viewport
<a name="l00122"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetrics02">00122</a>         {
00123             get
00124             {
00125                 <span class="keywordflow">return</span> _viewport;
00126             }
00127             set
00128             {
00129                 _viewport = value;
00130             }
00131         }
00132 
<a name="l00138"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetricsa4">00138</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> World2Pixel( ref <span class="keywordtype">double</span> x, ref <span class="keywordtype">double</span> y )
00139         {
00140             x = ( x - _viewport.Xmin ) / _mapUnitsPerPixelX;
00141             y = ( _viewport.Ymax - y ) / _mapUnitsPerPixelY;
00142         }
00143         
<a name="l00149"></a><a class="code" href="classShapeDotNet_1_1GIS_1_1MapMetrics.html#ShapeDotNet_1_1GIS_1_1MapMetricsa5">00149</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> World2Pixel( <a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html">PointD</a> oldPoint, ref Point newPoint )
00150         {           
00151             newPoint.X = (<span class="keywordtype">int</span>) ( ( oldPoint.<a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html#ShapeDotNet_1_1GIS_1_1PointD00">X</a> - _viewport.Xmin ) / _mapUnitsPerPixelX );
00152             newPoint.Y = (<span class="keywordtype">int</span>) ( ( _viewport.Ymax - oldPoint.<a class="code" href="classShapeDotNet_1_1GIS_1_1PointD.html#ShapeDotNet_1_1GIS_1_1PointD01">Y</a> ) / _mapUnitsPerPixelY );
00153         }
00154     }
00155 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Feb 10 17:52:24 2004 for GIS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
